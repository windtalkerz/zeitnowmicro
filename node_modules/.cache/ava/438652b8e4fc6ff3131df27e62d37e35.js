'use strict';

const micro = require('micro');
const test = require('ava');
// const listen = require('test-listen')
const request = require('request-promise');
const axios = require("axios");

// const dotenv = require("dotenv")
// dotenv.config()
// const PORT = process.env.PORT || null

// const DB_HOST = process.env.DB_HOST //"ds123844.mlab.com"
// const DB_PORT = process.env.DB_PORT //"23844"
// const DB_NAME = process.env.DB_NAME //"supermario-fortress"
// const DB_USER = process.env.DB_USER //"supermario-fortress"
// const DB_PASSWORD = process.env.DB_PASSWORD //"123supermario-fortress"

// mongoose.connect(`mongodb://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}`, { useNewUrlParser: true })

// const characters = mongoose.model('characters', new mongoose.Schema({
//     name: String,
//     color: String,
//     skill: String,
// }))


test("https://micro.supermario.io/api/get/characters.lambda.js", async t => {

    const mario = {
        "_id": "5c054977627966094cd725fe",
        "name": "mario",
        "color": "red",
        "skill": "jumpNrun"
    };

    const url = "https://micro.supermario.io/api/get/characters.lambda.js?name=mario"; //await listen(service)

    const { character } = JSON.parse((await request(url)));
    //const result = await (await axios.get(`${url}/?name=mario`, { name: "peach" })).data
    t.deepEqual(character, mario);
});
//# sourceMappingURL=/Users/mac/Desktop/zeitnowmicro/node_modules/.cache/ava/438652b8e4fc6ff3131df27e62d37e35.js.map